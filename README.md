# MSFA-ACME-Sales-v1.0
## CQRS


### Testing of JDBCBase.java
[Testing steps]
1. Setup PostgreSQL by using the Free instance on https://elephantsql.com/
2. Create a table using the SQL:
    CREATE TABLE person (
         person_id     INT  generated by default as identity,
         name          VARCHAR(255 ) not null,
         age           INT not null,
         PRIMARY   KEY(person_id)
      );
3. Insert a record in the person table using the 'SQL Browser'
4. Execute a Select statment against the bdb using the SQL Browser

5. Setup the connection parameters and credentials in 
    com.acme.infra.postgresql.JDBCBase.java

6. Execute the Test class 
    com.acme.sales.model.tests.repo.JDBCRepoTest.java



### Testing v1 CQS
Demonstrates a simple implementation of CQS
The underlying Database is shared.

Uses: PostgreSQL


v2
==
Demonstrates an implementation of CQRS wherein messaging is used
for triggering an event. Subscribers can use the Event Store for
capturing all of the events.

### Setup the Database PostgreSQL
1. Create tables by executing the 

### Testing v2 CQRS
1. Launch the Subscriber
2. Execute the Command
3. Execute the Query - should show the proposal created by command
 
Uses: PostgreSQL, RabbitMQ, MongoDB

v3
==
Reliable Messaging

1. Create the table in PostgreSQL Database using sql/reliable-messaging.sql
2. Launch the event processor -  tests/v3/TestEventProcessor
   * Once launched this will check for unprocessed events in proposals table every SLEEP_INTERVAL
   * All unpublished events will be published and events will be marked as "processed"
3. The test command class is -  tests/v3/TestCommand
   * Write the event to proposalsevents table instead of publishing



PostgreSQL Setup
================
www.elephantsql.com

FREE Database instance

MongoDB
=======
cloud.mongodb.com

FREE MongoDB instance

Create a Database = ACMETravel
Create a Collection = proposals

Rabbit MQ
=========
Create a Queue = proposals.reader.queue
Create a Exchange = acme.sales.topic
Create a Topic = proposal.update

Update the Rabbit MQ URL

